<!-- Responsive catalog. Tabbed view in widescreen, sidenav for selection on phone.  -->

<div flex layout="column" ng-controller="CatalogController as catalog">
  <md-toolbar layout="row">
    <!-- Hide sidebar button on phone. -->
    <md-button hide-gt-sm class="md-icon-button" ng-click="catalog.toggleMenu()" aria-label="Show Category List">
      <md-icon md-svg-icon="menu"></md-icon>
    </md-button>

    <span flex></span>
    
    <md-button class="md-icon-button" ng-click="catalog.openCart($event)" aria-label="Show Shopping Cart">
      <md-icon md-svg-icon="shopping_cart"></md-icon>
    </md-button>

    <md-button class="md-icon-button"  ng-click="catalog.ExtraActionMenu($event)" aria-label="More Actions">
      <md-icon md-svg-icon="more_vert"></md-icon>
    </md-button>
  </md-toolbar>

  <md-content hide-gt-sm class="md-headline" layout-padding layout-margin>
      {{catalog.currentCategory().title.toUpperCase()}}
  </md-content>

  <md-content>
    <md-tabs hide-sm class="md-whiteframe-z2" md-selected="catalog.selectedIdx">
      <md-tab ng-repeat="tab in catalog.categories"
              md-on-select="catalog.selectCategory($index)"
              label="{{tab.title}}">
        <md-tab-body></md-tab-body>
      </md-tab>
    </md-tabs>
    <md-content hide-lg hide-gt-lg>
      <md-grid-list class="grid" md-cols-sm="2" md-cols-gt-sm="4" md-gutter="0.5em" md-row-height="4:3">
        <md-grid-tile ng-repeat="item in catalog.items" 
                      md-colspan="{{$first ? 2 : 1}}"
                      md-rowspan="{{$first ? 2 : 1}}">
          <img class="tile" src="assets/{{item.img}}">
        </md-grid-tile>
      </md-grid-list>
    </md-content>
    <md-content hide-sm hide-md layout="row">
      <md-grid-list flex=33 class="grid" md-cols="2" md-gutter="0.5em" md-row-height="4:3">
        <md-grid-tile ng-repeat="item in catalog.items"> 
          <img class="tile" src="assets/{{item.img}}" md-colspan="1" md-rowspan="1">
        </md-grid-tile>
      </md-grid-list>
      <md-content flex>
        Cat description
      </md-content>
    </md-content>
  </md-content>

  <!-- Just show the title on mobile. -->
  <md-subheader>
    {{catalog.selected.title}}
  </md-subheader>

  <md-sidenav md-component-id="left" class="md-sidenav-left">
    <md-list>
      <md-list-item ng-repeat="category in catalog.categories"
                    ng-click="catalog.selectCategory($index)">
        <md-title>{{category.title}}</md-title>
      </md-list-item>
    </md-list>
  </md-sidenav>

</div>
